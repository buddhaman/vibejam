import { Level } from './Level';
import { Game } from './Game';
import { Serialize } from './Serialize';

export const long_level = {
  "name": "Custom Level",
  "author": "Level Editor",
  "version": 1,
  "created": "2025-04-01T21:33:34.154Z",
  "platforms": [
    {
      "position": [
        -35,
        3,
        -71
      ],
      "rotation": [
        0,
        0,
        0
      ],
      "scale": [
        28.400000000000002,
        4,
        28.8
      ],
      "color": "#ff0000",
      "name": ""
    },
    {
      "position": [
        -11,
        2.5,
        -72
      ],
      "rotation": [
        0,
        0,
        0
      ],
      "scale": [
        22.5,
        4,
        24.8
      ],
      "color": "#ff0000",
      "name": ""
    },
    {
      "position": [
        -83.5,
        111,
        -72.65942869408705
      ],
      "rotation": [
        0,
        0,
        0.08726646259971647
      ],
      "scale": [
        119.80000000000001,
        4,
        27.200000000000003
      ],
      "color": "#ff0000",
      "name": ""
    },
    {
      "position": [
        -133.5,
        85,
        -70.5
      ],
      "rotation": [
        -2.7052603405912112,
        0,
        0
      ],
      "scale": [
        22,
        4,
        13
      ],
      "color": "#ff0000",
      "name": ""
    },
    {
      "position": [
        -105.5,
        74.5,
        -70.5
      ],
      "rotation": [
        0,
        0,
        0
      ],
      "scale": [
        11.700000000000001,
        4,
        12.200000000000001
      ],
      "color": "#ff0000",
      "name": ""
    }
  ],
  "ropes": [
    {
      "startPos": [
        -156.5,
        115.5,
        -73.24680573566488
      ],
      "endPos": [
        -156.95104052718085,
        93.1970695464085,
        -73.40751296088511
      ],
      "length": 20,
      "segments": 14,
      "name": "Rope"
    }
  ],
  "saws": [
    {
      "position": [
        -43.91640022602501,
        121,
        -68.3033431828249
      ],
      "rotation": [
        0,
        0,
        -2.3050274980012246
      ],
      "radius": 4,
      "thickness": 1,
      "spinSpeed": 0.1,
      "name": "saw_1743543143157"
    },
    {
      "position": [
        -52.46696807060077,
        119.5,
        -64.82214676041902
      ],
      "rotation": [
        0,
        0,
        -1.1572478903074273
      ],
      "radius": 4,
      "thickness": 1,
      "spinSpeed": 0.1,
      "name": "saw_1743543143157"
    },
    {
      "position": [
        -65,
        119,
        -70
      ],
      "rotation": [
        0,
        0,
        -0.4076919687686683
      ],
      "radius": 4,
      "thickness": 1,
      "spinSpeed": 0.1,
      "name": "saw_1743543143157"
    },
    {
      "position": [
        -80,
        118.5,
        -76
      ],
      "rotation": [
        0,
        0,
        -2.8245066615890817
      ],
      "radius": 4,
      "thickness": 1,
      "spinSpeed": 0.1,
      "name": "saw_1743543143157"
    },
    {
      "position": [
        -91,
        117.5,
        -82.5
      ],
      "rotation": [
        0,
        0,
        0.2418639527700914
      ],
      "radius": 4,
      "thickness": 1,
      "spinSpeed": 0.1,
      "name": "saw_1743543143157"
    },
    {
      "position": [
        -105.5,
        113.5,
        -78.75240113081817
      ],
      "rotation": [
        0,
        0,
        2.7250492599496776
      ],
      "radius": 4,
      "thickness": 1,
      "spinSpeed": 0.1,
      "name": "saw_1743543143157"
    },
    {
      "position": [
        -125.5,
        115,
        -66
      ],
      "rotation": [
        0,
        0,
        0.8914198743088512
      ],
      "radius": 4,
      "thickness": 1,
      "spinSpeed": 0.1,
      "name": "saw_1743543143157"
    },
    {
      "position": [
        -118,
        113.5,
        -80.5
      ],
      "rotation": [
        0,
        0,
        -2.9750110287570566
      ],
      "radius": 4,
      "thickness": 1,
      "spinSpeed": 0.1,
      "name": "saw_1743543143157"
    }
  ],
  "actionAreas": [
    {
      "position": [
        -106.35221738856512,
        80.5,
        -71
      ],
      "size": [
        8,
        8,
        8
      ],
      "triggerOnce": false,
      "name": "actionarea_1743543214154"
    }
  ],
  "updrafts": [
    {
      "position": [
        -11.5,
        88.5,
        -73
      ],
      "size": [
        15.399999999999999,
        165.3,
        14.5
      ],
      "strength": 0.1,
      "name": "updraft_1743543214154"
    }
  ],
  "playerStartPosition": [
    -33.5,
    14,
    -71.27141271430021
  ]
}

export const simple_finish = {
  "name": "Simple Finish",
  "author": "Level Editor",
  "version": 1,
  "created": "2025-04-01T20:19:44.343Z",
  "platforms": [
    {
      "position": [
        -71,
        6.5,
        -10.399345372924998
      ],
      "rotation": [
        0,
        0,
        0
      ],
      "scale": [
        49.900000000000006,
        4,
        48.400000000000006
      ],
      "color": "#ff0000",
      "name": ""
    },
    {
      "position": [
        -35.5,
        6,
        -12.5
      ],
      "rotation": [
        0,
        0,
        0
      ],
      "scale": [
        22.400000000000002,
        4,
        18.7
      ],
      "color": "#ff0000",
      "name": ""
    },
    {
      "position": [
        -9,
        18,
        -106.5
      ],
      "rotation": [
        0,
        0,
        0
      ],
      "scale": [
        28.1,
        5,
        12.7
      ],
      "color": "#ff0000",
      "name": ""
    },
    {
      "position": [
        -10,
        55.5,
        -42
      ],
      "rotation": [
        0.3490658503988661,
        -0.7853981633974487,
        3.9252311467094385e-17
      ],
      "scale": [
        30,
        5,
        30
      ],
      "color": "#ff0000",
      "name": ""
    },
    {
      "position": [
        -17,
        58.5,
        -75
      ],
      "rotation": [
        0,
        0,
        0
      ],
      "scale": [
        20,
        5,
        20.1
      ],
      "color": "#ff0000",
      "name": ""
    }
  ],
  "ropes": [
    {
      "startPos": [
        -31.281919161974724,
        79.36260447403293,
        -25.14120154684962
      ],
      "endPos": [
        -31.281923285286425,
        57.053792998864694,
        -25.14107860216618
      ],
      "length": 20,
      "segments": 14,
      "name": "Rope"
    }
  ],
  "saws": [],
  "actionAreas": [
    {
      "position": [
        -2.5,
        24.5,
        -105.5
      ],
      "size": [
        8.000000000000002,
        8,
        8
      ],
      "triggerOnce": false,
      "name": "actionarea_1743538784344"
    }
  ],
  "updrafts": [
    {
      "position": [
        -35.5,
        37.5,
        -12.5
      ],
      "size": [
        10.200000000000003,
        60.099999999999994,
        8
      ],
      "strength": 0.1,
      "name": "updraft_1743538784344"
    }
  ],
  "playerStartPosition": [
    -69,
    15.5,
    -13.5
  ]
}

export const first_level = {
  "name": "First Level",
  "author": "Level Editor",
  "version": 1,
  "created": "2025-04-01T17:49:17.144Z",
  "platforms": [
    {
      "position": [
        -114,
        14,
        -36
      ],
      "rotation": [
        0.08726646259971649,
        0.08726646259971649,
        0
      ],
      "scale": [
        28.6,
        98.9,
        25.1
      ],
      "color": "#ff0000",
      "name": ""
    },
    {
      "position": [
        -74.5,
        0,
        -34.5
      ],
      "rotation": [
        0,
        0,
        0
      ],
      "scale": [
        28,
        100,
        28
      ],
      "color": "#ff0000",
      "name": ""
    },
    {
      "position": [
        -29,
        10.5,
        -31.5
      ],
      "rotation": [
        -0.17453292519943295,
        0,
        0
      ],
      "scale": [
        28,
        50,
        35.6
      ],
      "color": "#ff0000",
      "name": ""
    },
    {
      "position": [
        -1.5,
        17.5,
        -64.5
      ],
      "rotation": [
        0,
        0,
        0
      ],
      "scale": [
        33.5,
        4,
        4.1000000000000005
      ],
      "color": "#ff0000",
      "name": ""
    },
    {
      "position": [
        31,
        6.5,
        -70.5
      ],
      "rotation": [
        0,
        0,
        0
      ],
      "scale": [
        16,
        4,
        15.4
      ],
      "color": "#ff0000",
      "name": ""
    }
  ],
  "ropes": [],
  "saws": [
    {
      "position": [
        -41,
        39,
        -41.5
      ],
      "rotation": [
        0,
        0,
        2.1559538861163245
      ],
      "radius": 4,
      "thickness": 1,
      "spinSpeed": 0.1,
      "name": "saw_1743529574584"
    },
    {
      "position": [
        -33,
        39.5,
        -49
      ],
      "rotation": [
        0,
        0,
        -3.1121930420878186
      ],
      "radius": 4,
      "thickness": 1,
      "spinSpeed": 0.1,
      "name": "saw_1743529574584"
    },
    {
      "position": [
        -26.5,
        39.5,
        -41.5
      ],
      "rotation": [
        0,
        0,
        1.570992265091768
      ],
      "radius": 4,
      "thickness": 1,
      "spinSpeed": 0.1,
      "name": "saw_1743529574584"
    },
    {
      "position": [
        -31,
        33,
        -63
      ],
      "rotation": [
        -1.5707963267949034,
        0.5582114081133476,
        -1.5707963267948886
      ],
      "radius": 4,
      "thickness": 1,
      "spinSpeed": 0.1,
      "name": "saw_1743529574584"
    }
  ],
  "actionAreas": [
    {
      "position": [
        31,
        12.5,
        -70.5
      ],
      "size": [
        8,
        8,
        8
      ],
      "triggerOnce": false,
      "name": "actionarea_1743529757144"
    }
  ],
  "playerStartPosition": [
    -113,
    68.5,
    -31
  ]
}

export const tutorial_level = {
  "name": "Tutorial Level",
  "author": "Level Editor",
  "version": 1,
  "created": "2025-04-01T09:05:53.207Z",
  "platforms": [
    {
      "position": [
        0,
        -4,
        0
      ],
      "rotation": [
        0,
        0,
        0
      ],
      "scale": [
        100,
        3,
        100
      ],
      "color": "#ff8888",
      "name": ""
    },
    {
      "position": [
        -3.318727521972048,
        14.096047623476675,
        -46.5
      ],
      "rotation": [
        0,
        0,
        0
      ],
      "scale": [
        18.3,
        4,
        36.6
      ],
      "color": "#ff0000",
      "name": ""
    },
    {
      "position": [
        -2,
        4,
        -1.5
      ],
      "rotation": [
        0,
        0,
        0
      ],
      "scale": [
        21.200000000000003,
        4,
        19.200000000000003
      ],
      "color": "#ff0000",
      "name": ""
    },
    {
      "position": [
        -2.5,
        2,
        15
      ],
      "rotation": [
        0,
        0,
        0
      ],
      "scale": [
        4,
        4,
        4
      ],
      "color": "#ff0000",
      "name": ""
    },
    {
      "position": [
        -20,
        1,
        21
      ],
      "rotation": [
        0,
        0,
        0
      ],
      "scale": [
        22,
        4,
        16
      ],
      "color": "#ff0000",
      "name": ""
    }
  ],
  "ropes": [
    {
      "startPos": [
        -3.5,
        41.5,
        -23.5
      ],
      "endPos": [
        -3.5632050561070767,
        19.191100667087472,
        -23.750747138426842
      ],
      "length": 20,
      "segments": 14,
      "name": "Rope"
    }
  ],
  "saws": [
    {
      "position": [
        -12,
        20,
        -22.04921809365678
      ],
      "rotation": [
        -1.4619546048150494,
        0.6395909717003178,
        3.047289551307195
      ],
      "radius": 4,
      "thickness": 1,
      "spinSpeed": 0.1,
      "name": "saw_1743498353207"
    },
    {
      "position": [
        6,
        20.5,
        -21.5
      ],
      "rotation": [
        0,
        0,
        -0.5300164692441713
      ],
      "radius": 4,
      "thickness": 1,
      "spinSpeed": 0.1,
      "name": "saw_1743498353207"
    }
  ],
  "actionAreas": [
    {
      "position": [
        -20.963095081297276,
        7.5,
        22
      ],
      "size": [
        8,
        8,
        8
      ],
      "triggerOnce": false,
      "name": "actionarea_1743498353207"
    }
  ],
  "playerStartPosition": [
    -3.311564302153283,
    23.42808941552309,
    -58.80787738458037
  ]
}

/**
 * Loads any JSON level data
 * @param level The Level instance to populate
 * @param game The Game instance for level switching
 * @param levelData The JSON level data to load
 */
export function loadJSONLevel(level: Level, game: Game, levelData: any, timed: boolean = false): void {
    console.log(`Loading JSON level: ${levelData.name}`);
    
    // Convert to string for serialization
    const jsonString = JSON.stringify(levelData);
    
    // Use the existing Serialize.loadLevelFromString method
    const success = Serialize.loadLevelFromString(level, jsonString);

    // Go over all action areas and set the callback to go back to the overworld
    level.actionAreas.forEach(area => {
        area.callback = () => {
          if (timed) {
            level.levelFinished();
          } else {
            game.switchLevel(0);
          }
        };
        area.triggerOnce = true;
    });
    
    if (success) {
        console.log(`Successfully loaded ${levelData.name}`);
    } else {
        console.error(`Failed to load level: ${levelData.name}`);
    }
}